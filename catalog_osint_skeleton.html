<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>catalogue dâ€™enquÃªtes de type OSINT</title>
<style>
:root{--bg:#fff;--fg:#0f172a;--muted:#475569;--card:#ffffff;--border:#e2e8f0;--chip:#f1f5f9;--chip-fg:#334155;--emerald:#059669;--amber:#d97706;--indigo:#4f46e5;}
*{box-sizing:border-box}html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
.container{max-width:1120px;margin:0 auto;padding:0 16px}
.header{background:linear-gradient(90deg,#6ee7b7,#34d399,#2dd4bf);padding:40px 0}
.h1{margin:0;font-weight:800;font-size:28px}
.sub{opacity:.85;font-size:18px;margin-top:6px}
.grid{display:grid;grid-template-columns:1fr;gap:16px}
@media(min-width:768px){.grid{grid-template-columns:1fr 1fr}}
@media(min-width:1200px){.grid{grid-template-columns:1fr 1fr 1fr}}
.card{background:var(--card);border:1px solid var(--border);border-left:8px solid transparent;border-radius:12px;box-shadow:0 1px 2px rgba(0,0,0,.04);overflow:hidden}
.card .body{padding:16px}
.flex{display:flex}.items-start{align-items:flex-start}.gap-3{gap:12px}.mb-2{margin-bottom:8px}.mb-3{margin-bottom:12px}
.logo{width:40px;height:40px;object-fit:contain;border-radius:4px;background:#fff}
.title{font-weight:700;font-size:18px;margin:0;line-height:1.25}
.p{font-size:14px;color:#334155;margin:0}
.row{display:flex;align-items:center;justify-content:space-between;font-size:14px;color:#475569}
.badges,.authors{display:flex;flex-wrap:wrap;gap:8px}
.badge{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px}
.badge-gray{background:var(--chip);color:var(--chip-fg)}
.badge-ia{background:var(--indigo);color:#fff}
.badge-pro{background:var(--emerald);color:#fff}
.badge-rea{background:var(--amber);color:#fff}
.controls{display:grid;grid-template-columns:1fr;gap:12px}
@media(min-width:768px){.controls{grid-template-columns:1fr 1fr}}
@media(min-width:1200px){.controls{grid-template-columns:1fr 1fr 1fr}}
.label{font-size:13px;color:#334155;margin-bottom:4px}
.input,.select,.date{width:100%;padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:#fff}
.btn{display:inline-flex;align-items:center;justify-content:center;padding:8px 14px;border-radius:10px;border:1px solid var(--border);background:#fff;cursor:pointer}
.btn.primary{background:#059669;color:#fff;border-color:#059669}
.counter{font-size:14px;color:#475569;margin:8px 0 12px}
.footer{border-top:1px solid var(--border);margin-top:28px}
.footer .inner{padding:16px 0;color:#475569;font-size:14px}
.error{display:none;margin:0 0 12px;padding:10px;border-radius:10px;background:#fef2f2;color:#b91c1c;font-size:14px}
</style>
</head>
<body>
  <header class="header">
    <div class="container">
      <h1 class="h1">catalogue dâ€™enquÃªtes de type OSINT</h1>
      <p class="sub">Investigations audiovisuelles</p>
    </div>
  </header>

  <main class="container" style="padding:24px 0">
    <div id="err" class="error"></div>
    <section class="controls" aria-labelledby="filters">
      <div>
        <div class="label">Recherche (titre, rÃ©sumÃ©, commentaire)</div>
        <input id="q" type="search" placeholder="Rechercher..." class="input"/>
      </div>
      <div>
        <div class="label">MÃ©dia</div>
        <select id="f-media" class="select"></select>
      </div>
      <div>
        <div class="label">Auteurs</div>
        <select id="f-authors" class="select"></select>
      </div>
      <div>
        <div class="label">ThÃ©matique</div>
        <select id="f-theme" class="select"></select>
      </div>
      <div>
        <div class="label">ProactivitÃ©</div>
        <select id="f-proact" class="select">
          <option value="">(toutes)</option>
          <option value="proactive">proactive</option>
          <option value="reactive">reactive</option>
        </select>
      </div>
      <div>
        <div class="label">IA</div>
        <select id="f-ia" class="select">
          <option value="">(tout)</option>
          <option value="yes">yes</option>
          <option value="no">no</option>
        </select>
      </div>
      <div>
        <div class="label">Date (de)</div>
        <input id="f-date-de" type="date" class="date"/>
      </div>
      <div>
        <div class="label">Date (Ã )</div>
        <input id="f-date-a" type="date" class="date"/>
      </div>
      <div style="display:flex;gap:8px;align-items:end">
        <button id="btn-reset" class="btn">RÃ©initialiser</button>
        <button id="btn-export" class="btn primary">Exporter en CSV</button>
      </div>
    </section>

    <div id="counter" class="counter"></div>

    <section>
      <div id="results" class="grid"></div>
    </section>
  </main>

  <footer class="footer">
    <div class="container inner">
      Projet MatrioscIA. Olivier Le Deuff, Thais Barbosa de Almeida, Rayya Roumanos, Mailuxa Pagola. 2025. Licence CC BY
    </div>
  </footer>

<script>
/* Nombre total de fiches intÃ©grÃ©es: (sera dÃ©terminÃ© cÃ´tÃ© donnÃ©es) */
window._DATA = window._DATA = [{"title": "Non, porter des lunettes de soleil n'augmente pas le risque d'avoir un cancer", "content": "Les rayons UV peuvent endommager les yeux, comme c'est le cas pour la peau lors d'un coup de soleil. Pourtant, dans une vidÃ©o partagÃ©e sur les rÃ©seaux sociaux, un naturopathe explique que porter des lunettes de soleil augmenterait les risques d'avoir un cancer, en empÃªchant le corps de crÃ©er de la mÃ©lanine - laquelle participe Ã  la protection de la peau contre les rayons UV. C'est faux: porter des lunettes ne rend pas la peau plus sensible, comme l'expliquent Ã  l'AFP des professionnels de la vue, de la peau et des cancers, rappelant les dangers de l'exposition au soleil pour les yeux. L'exposition solaire reste par ailleurs la cause principale des cancers de la peau.", "date": "2024-12-12", "media": "AFP", "link": "https://factuel.afp.com/doc.afp.com.36PZ2BK", "commentaire": "", "authors": ["ChloÃ© Rabs"], "theme": "approfondissement de l'actualite", "proact": "reactive", "hasIA": false}, {"title": "Non, les programmes de SVT n'invitent pas les Ã©lÃ¨ves Ã  choisir leur sexe", "content": "Le nouveau programme d'Ã©ducation Ã  la vie affective, relationnelle et sexuelle (Evars), en concertation depuis le mois de mars, fait l'objet de vifs dÃ©bats en France. Dans ce contexte, la dÃ©putÃ©e de droite Christelle D'Intorni (UDR) a affirmÃ© que les manuels actuels de Sciences et vie de la Terre (SVT) de quatriÃ¨me et de seconde invitaient \"les enfants Ã  choisir leur sexe\". Mais s'ils abordent la distinction entre sexe et genre, ni les ouvrages scolaires auxquels se rÃ©fÃ¨re l'Ã©lue, ni le programme de l'Education nationale ne contiennent d'invitation pour les Ã©lÃ¨ves Ã  faire un tel choix.", "date": "2024-12-11", "media": "AFP", "link": "https://factuel.afp.com/doc.afp.com.36PL2BQ", "commentaire": "", "authors": ["Lucie de Perthus"], "theme": "approfondissement de l'actualite", "proact": "", "hasIA": false}, {"title": "Non, cette vidÃ©o ne montre pas un FranÃ§ais appelÃ© Ã  aller combattre en Ukraine", "content": "Emmanuel Macron avait dÃ©clarÃ© en fÃ©vrier que l'envoi de troupes en Ukraine ne pouvait pas \"Ãªtre exclu\" Ã  l'avenir, tout en rÃ©affirmant son souhait de \"parvenir Ã  une paix juste et durable\" entre Kiev et Moscou. Ces propos avaient suscitÃ© un vif dÃ©bat, ainsi que des affirmations erronÃ©es sur les rÃ©seaux sociaux, affirmant Ã  tort qu'avaient dÃ©butÃ© des recrutements de soldats franÃ§ais pour l'Ukraine, voire que des soldats tricolores Ã©taient morts sur le front ukrainien. Des infox susceptibles de saper le soutien occidental Ã  Kiev, crucial dans sa rÃ©sistance Ã  la Russie. Dans une vidÃ©o trÃ¨s partagÃ©e fin 2024, un internaute assure avoir reÃ§u une convocation l'obligeant Ã  aller combattre sur le front ukrainien au sein de l'armÃ©e franÃ§aise. Mais cette affirmation est fausse, comme l'internaute lui-mÃªme l'a confirmÃ©.", "date": "2024-12-11", "media": "AFP", "link": "https://factuel.afp.com/doc.afp.com.36PH69A", "commentaire": "", "authors": ["Louise Dalmasso"], "theme": "strategies militaires et dâ€™influence", "proact": "", "hasIA": false}, {"title": "Non, cette image ne montre pas un dÃ©tenu de la prison syrienne de Saydnaya", "content": "Peu aprÃ¨s la chute du prÃ©sident syrien Bachar al-Assad dÃ©but dÃ©cembre 2024, provoquÃ©e par une offensive Ã©clair de groupes rebelles menÃ©s par des islamistes radicaux, ces derniers ont annoncÃ© la prise de contrÃ´le de la prison de Saydnaya, symbole des pires exactions du rÃ©gime, et la libÃ©ration de ses dÃ©tenus. Dans ce contexte, des internautes partagent sur les rÃ©seaux sociaux la prÃ©tendue image d'un dÃ©tenu retrouvÃ© dans un souterrain de l'Ã©tablissement pÃ©nitentiaire situÃ© prÃ¨s de Damas. Mais c'est faux : il s'agit de la capture d'Ã©cran d'une vidÃ©o rÃ©alisÃ©e par intelligence artificielle (IA), mise en ligne sur TikTok plusieurs jours avant la chute du rÃ©gime syrien, et sans rapport avec la prison de Saydnaya.", "date": "2024-12-11", "media": "AFP", "link": "https://factuel.afp.com/doc.afp.com.36PX8J7", "commentaire": "", "authors": ["Alexis Orsini"], "theme": "humanitaire", "proact": "reactive", "hasIA": true}, {"title": "Ces images ne montrent pas des terroristes venus dâ€™Abidjan pour attaquer le Burkina Faso", "content": "Les militaires au pouvoir au Burkina Faso accusent rÃ©guliÃ¨rement la CÃ´te dâ€™Ivoire voisine de chercher Ã  dÃ©stabiliser leur rÃ©gime, au moment oÃ¹ des milliers de rÃ©fugiÃ©s burkinabÃ¨ fuient lâ€™insÃ©curitÃ© dans leur pays. Des publications cumulant plus de 100.000 vues et de 1.500 partages prÃ©tendent images Ã  lâ€™appui que des terroristes venant dâ€™Abidjan ont Ã©tÃ© interceptÃ©s par les forces burkinabÃ¨, alors quâ€™ils voyageaient cachÃ©s sous de faux tuyaux Ã  bord dâ€™un camion. Mais ces images montrent en rÃ©alitÃ© un camion trafiquÃ© qui transportait des migrants Ã©thiopiens arrÃªtÃ©s en Tanzanie.", "date": "2024-12-10", "media": "AFP", "link": "https://factuel.afp.com/doc.afp.com.36PX6FH", "commentaire": "", "authors": ["Suy Kahofi"], "theme": "strategies militaires et dâ€™influence", "proact": "reactive", "hasIA": false}, {"title": "Non, l'Etat ne peut pas saisir l'Ã©pargne des FranÃ§ais en 72 heures pour financer l'aide Ã  l'Ukraine", "content": "La guerre en Ukraine et le soutien des Occidentaux Ã  Kiev est un terreau fertile pour la dÃ©sinformation depuis l'invasion russe en fÃ©vrier 2022. Des publications sur les rÃ©seaux sociaux affirment ainsi dÃ©but dÃ©cembre 2024 qu'\"en cas de menace sur l'intÃ©gritÃ© du territoire\", la loi de programmation militaire votÃ©e en 2023 permettrait dÃ©sormais Ã  l'Etat de \"saisir tout l'argent\" sur les comptes en banque des particuliers \"en 72 heures\". Mais c'est faux : dans un contexte de menaces nouvelles, cette loi a modernisÃ© le code de la DÃ©fense, dont le champ d'application reste militaire, et non civil, et qui encadre notamment les rÃ©quisitions de biens matÃ©riels, pas les fonds des particuliers.", "date": "2024-12-09", "media": "AFP", "link": "https://factuel.afp.com/doc.afp.com.36PE2QJ", "commentaire": "", "authors": ["GaÃ«lle Geoffroy"], "theme": "approfondissement de l'actualite", "proact": "reactive", "hasIA": false}, {"title": "La \"premiÃ¨re photo\" de Bachar al-Assad Ã  Moscou depuis la chute du rÃ©gime syrien ? C'est faux", "content": "L'offensive Ã©clair de groupes rebelles menÃ©s par des islamistes radicaux en Syrie a entraÃ®nÃ©, dans la nuit du 7 au 8 dÃ©cembre, la chute du rÃ©gime syrien et la fuite du prÃ©sident Bachar al-Assad. Dans ce contexte, des internautes partagent, sur les rÃ©seaux sociaux, une image montrant le prÃ©sident syrien et son Ã©pouse Asma marcher cÃ´te-Ã -cÃ´te, en affirmant qu'il s'agirait de la \"premiÃ¨re photo\" du couple al-Assad prise depuis son arrivÃ©e Ã  Moscou. Mais il s'agit en rÃ©alitÃ© d'une capture d'Ã©cran d'images filmÃ©es en fÃ©vrier 2023 dans un hÃ´pital d'Alep. Par ailleurs, si des agences de presse russes ont affirmÃ© le 8 dÃ©cembre que Bachar al-Assad et sa famille se trouvaient Ã  Moscou, le Kremlin a refusÃ©, le lendemain, de confirmer leur prÃ©sence en Russie.", "date": "2024-12-09", "media": "AFP", "link": "https://factuel.afp.com/doc.afp.com.36PY6AB", "commentaire": "", "authors": ["Alexis Orsini", "Dounia Mahieddine"], "theme": "approfondissement de l'actualite", "proact": "reactive", "hasIA": false}, {"title": "Attention Ã  ces comptes TikTok \"d'actualitÃ©s\" qui vÃ©hiculent de la dÃ©sinformation", "content": "Plus de la moitiÃ© des FranÃ§ais disent s'informer sur les rÃ©seaux sociaux, selon des Ã©tudes d'opinion menÃ©es ces derniÃ¨res annÃ©es. Sur TikTok, des comptes se prÃ©sentant comme des mÃ©dias d'actualitÃ©s amassent des dizaines de milliers d'abonnÃ©s. Attention : s'ils imitent parfois l'identitÃ© graphique de mÃ©dias classiques, nombre d'entre eux vÃ©hiculent rÃ©guliÃ¨rement de la dÃ©sinformation et visent avant tout Ã  rÃ©colter un maximum de partages. Ces comptes s'appuient sur le phÃ©nomÃ¨ne ancien des rumeurs qui piochent Ã  la fois dans du vrai et du faux pour accroÃ®tre leur audience grÃ¢ce aux algorithmes des rÃ©seaux sociaux comme TikTok, qui permettent au brouillard informationnel de perdurer, estiment plusieurs spÃ©cialistes auprÃ¨s de l'AFP.", "date": "2024-12-09", "media": "AFP", "link": "https://factuel.afp.com/doc.afp.com.36PB39P", "commentaire": "Cette enquÃªte mentionne le pouvoir malveillant de l'IA dans la production de fausses informations. Ce reportage est associÃ© Ã  cette vidÃ©o, publiÃ©e aussi par Factuel, pour alerter sur l'usage des images fabriquÃ©es par l'IA dans la fabrique de fake news : https://www.youtube.com/watch?v=w1QNw71ykOw", "authors": ["Claire-Line Nass"], "theme": "crime organise", "proact": "reactive", "hasIA": true}, {"title": "EnquÃªte - Ukraine : la dÃ©sillusion des combattants latino-amÃ©ricains", "content": "Quelques jours aprÃ¨s lâ€™invasion de lâ€™Ukraine par la Russie en fÃ©vrier 2022, le prÃ©sident Volodymyr Zelensky appelle les Ã©trangers Ã  rejoindre son pays. Des milliers de volontaires rÃ©pondent Ã  son appel, principalement des Occidentaux. Peu Ã  peu, le profil de ces Ã©trangers Ã©volue et des combattants venant dâ€™AmÃ©rique Latine rejoignent les rangs. La rÃ©daction des Observateurs de France 24 a enquÃªtÃ© sur cette facette moins connue de la guerre en Ukraine. La journaliste ChloÃ© Lauvergnier Ã©voque le sujet dans la chronique DerriÃ¨re l'image.", "date": "2024-12-04", "media": "Les Observateurs", "link": "https://www.france24.com/fr/vid%C3%A9o/20241126-enqu%C3%AAte-ukraine-la-d%C3%A9sillusion-des-combattants-latino-am%C3%A9ricains", "commentaire": "", "authors": ["ChloÃ© Lauvergnier"], "theme": "humanitaire", "proact": "proactive", "hasIA": false}, {"title": "The decisions that cost some lives and saved others during Heleneâ€™s wrath", "content": "Victims and survivors filmed Heleneâ€™s flooding in Tennessee, showing what went wrong as a hospital was evacuated and six people were swept away at a nearby factory.", "date": "2024-11-27", "media": "Washington Post", "link": "https://www.washingtonpost.com/nation/2024/11/27/hurricane-helene-erwin-tennessee-impact-plastics/", "commentaire": "", "authors": [], "theme": "catastrophes naturelles", "proact": "", "ha;
window._MEDIA_LOGOS = {
  "AFP": "https://upload.wikimedia.org/wikipedia/commons/5/52/Agence_France-Presse_logo.svg",
  "France 24": "https://upload.wikimedia.org/wikipedia/commons/3/3f/France_24_logo_2013.svg",
  "Les Observateurs": "https://upload.wikimedia.org/wikipedia/commons/3/3f/France_24_logo_2013.svg",
  "Le Monde": "https://upload.wikimedia.org/wikipedia/commons/9/9c/Le_Monde_logo_%282009%29.svg",
  "LibÃ©ration": "https://upload.wikimedia.org/wikipedia/commons/1/19/Liberation_logo.svg",
  "Le Figaro": "https://upload.wikimedia.org/wikipedia/commons/6/69/Le_Figaro_logo.svg",
  "Mediapart": "https://upload.wikimedia.org/wikipedia/commons/8/83/Logo_Mediapart.svg",
  "Arte": "https://upload.wikimedia.org/wikipedia/commons/2/2a/Arte_Logo_2017.svg",
  "The New York Times": "https://upload.wikimedia.org/wikipedia/commons/5/58/NewYorkTimes.svg",
  "The Washington Post": "https://upload.wikimedia.org/wikipedia/commons/0/0e/The_Washington_Post_logo.svg",
  "Reuters": "https://upload.wikimedia.org/wikipedia/commons/1/17/Reuters_Logo.svg",
  "BBC": "https://upload.wikimedia.org/wikipedia/commons/8/80/BBC_Worldwide.svg",
  "The Guardian": "https://upload.wikimedia.org/wikipedia/commons/0/0e/The_Guardian_2018.svg",
  "Associated Press": "https://upload.wikimedia.org/wikipedia/commons/a/a9/Associated_Press_logo_2012.svg",
  "Bellingcat": "https://upload.wikimedia.org/wikipedia/commons/4/48/Bellingcat_logo.svg"
};
window._THEME_COLORS = {
  "humanitaire":"#8b5cf6",
  "problÃ©matiques environnementales":"#10b981",
  "stratÃ©gies militaires":"#8B4513",
  "stratÃ©gies militaires et influence":"#78866B",
  "crime organisÃ©":"#000000",
  "rÃ©pression de l'Ã©tat":"#f97316",
  "approfondissement de l'actualitÃ©":"#3b82f6",
  "catastrophes naturelles":"#ef4444"
};

function uniqueSorted(arr){return Array.from(new Set(arr.filter(Boolean))).sort((a,b)=>a.localeCompare(b,'fr',{sensitivity:'base'}));}
function hslHashColor(t){let h=0;for(let i=0;i<t.length;i++)h=t.charCodeAt(i)+((h<<5)-h);h=Math.abs(h)%360;return`hsl(${h},60%,55%)`;}
function colorForTheme(th){if(!th)return'#94a3b8';const k=(th||'').toLowerCase();return window._THEME_COLORS[k]||hslHashColor(k);}
function humanizeTheme(th){return th?th.charAt(0).toUpperCase()+th.slice(1):"Sans thÃ©matique";}
function monogramFor(m){if(!m)return"â€”";const w=m.split(/\s+/).filter(Boolean);if(w.length===1)return w[0].slice(0,3).toUpperCase();return (w[0][0]+(w[1]?.[0]||'')+(w[2]?.[0]||'')).toUpperCase();}
function logoFor(m){return m?window._MEDIA_LOGOS[m]||null:null;}
function formatDateFR(iso){if(!iso)return"(date manquante)";const d=new Date(iso);return isNaN(d.getTime())?"(date manquante)":d.toLocaleDateString('fr-FR',{year:'numeric',month:'long',day:'numeric'});}
function badge(text, cls){return `<span class="badge ${cls}">${text}</span>`;}

function card(rec){
  const tcol=colorForTheme(rec.theme), tlabel=humanizeTheme(rec.theme);
  const pro = rec.proact==='proactive'?badge('proactive','badge-pro'): (rec.proact==='reactive'?badge('reactive','badge-rea'):'');
  const ia = rec.hasIA?badge('IA','badge-ia'):'';
  const med = rec.media?badge(rec.media,'badge-gray'):'';
  const th = `<span class="badge" style="background:${tcol};color:#fff">${tlabel}</span>`;
  const logo=logoFor(rec.media);
  const logoEl = logo? `<img src="${logo}" alt="${rec.media||''}" class="logo"/>` : `<div class="logo" style="display:flex;align-items:center;justify-content:center;background:#f8fafc;color:#334155;font-weight:700">${monogramFor(rec.media||'')}</div>`;
  const linkEl = rec.link? `<a href="${rec.link}" target="_blank" rel="noopener" title="Ouvrir le lien">ðŸ”—</a>` : '';
  const authors = (rec.authors||[]).map(a=>badge(a,'badge-gray')).join(' ');
  return `<article class="card" style="border-left-color:${tcol}"><div class="body"><div class="flex items-start gap-3 mb-2">${logoEl}<h3 class="title">${rec.title}</h3></div><p class="p mb-3">${(rec.content||'')}</p><div class="badges mb-3">${med} ${ia} ${pro} ${th}</div>${authors?`<div class="authors mb-3">${authors}</div>`:''}<div class="row"><time>${formatDateFR(rec.date)}</time>${linkEl}</div></div></article>`;
}

function buildFilters(){
  const medias=uniqueSorted(window._DATA.map(r=>r.media&&r.media.trim()).filter(Boolean));
  const authors=uniqueSorted(window._DATA.flatMap(r=>r.authors||[]));
  const themeMap=new Map(); window._DATA.map(r=>r.theme||"").forEach(t=>themeMap.set((t||"").toLowerCase(),t));
  const themes=uniqueSorted(Array.from(themeMap.values()));
  const m=document.getElementById('f-media'), a=document.getElementById('f-authors'), th=document.getElementById('f-theme');
  m.innerHTML='<option value="">(tous)</option>'+medias.map(v=>`<option value="${v}">${v}</option>`).join('');
  a.innerHTML='<option value="">(tous)</option>'+authors.map(v=>`<option value="${v}">${v}</option>`).join('');
  th.innerHTML='<option value="">(toutes)</option>'+themes.map(v=>`<option value="${v}">${humanizeTheme(v)}</option>`).join('');
  const ds=window._DATA.map(r=>r.date).filter(Boolean).sort(); const min=ds[0], max=ds[ds.length-1];
  const de=document.getElementById('f-date-de'), aa=document.getElementById('f-date-a');
  if(min)de.min=min, de.value=min; if(max)aa.max=max, aa.value=max;
}

function matches(rec){
  const q=document.getElementById('q').value.trim().toLowerCase();
  const media=document.getElementById('f-media').value;
  const author=document.getElementById('f-authors').value;
  const theme=document.getElementById('f-theme').value;
  const proact=document.getElementById('f-proact').value;
  const ia=document.getElementById('f-ia').value;
  const de=document.getElementById('f-date-de').value;
  const aa=document.getElementById('f-date-a').value;
  if(q){
    const hay=(rec.title+' '+(rec.content||'')+' '+(rec.commentaire||'')).toLowerCase();
    if(!hay.includes(q))return false;
  }
  if(media && rec.media!==media) return false;
  if(author && !(rec.authors||[]).includes(author)) return false;
  if(theme && (rec.theme||'')!==theme) return false;
  if(proact && (rec.proact||'')!==proact) return false;
  if(ia){ if(ia==='yes' && !rec.hasIA) return false; if(ia==='no' && rec.hasIA) return false; }
  if(de && rec.date && rec.date<de) return false;
  if(aa && rec.date && rec.date>aa) return false;
  return true;
}

function render(){
  const cont=document.getElementById('results');
  const list=window._DATA.slice().sort((a,b)=>{const da=(a.date||''), db=(b.date||''); if(da===db) return a.title.localeCompare(b.title,'fr',{sensitivity:'base'}); return da<db?1:-1;});
  const filtered=list.filter(matches);
  cont.innerHTML=filtered.map(card).join('');
  document.getElementById('counter').textContent = `${filtered.length} rÃ©sultat(s) affichÃ©(s) / ${list.length}`;
  window._CURRENT=filtered;
}

function resetFilters(){
  document.getElementById('q').value='';
  ['f-media','f-authors','f-theme','f-proact','f-ia'].forEach(id=>document.getElementById(id).value='');
  const ds=window._DATA.map(r=>r.date).filter(Boolean).sort(); const min=ds[0], max=ds[ds.length-1];
  const de=document.getElementById('f-date-de'), aa=document.getElementById('f-date-a');
  de.value=min||''; aa.value=max||''; render();
}

function exportCSV(){
  const rows=window._CURRENT||[];
  const headers=["title","content","date","media","link","commentaire","authors","theme","proact","hasIA"];
  const esc=v=>(''+v).replace(/"/g,'""');
  const lines=[headers.join(',')];
  rows.forEach(r=>{lines.push(headers.map(h=>`"${esc(h==='authors'?(r.authors||[]).join(' | '):(h==='hasIA'?(r.hasIA?'yes':'no'):(r[h]||'')).toString().replace(/\r?\n/g,' ').trim()))}"`).join(','));});
  const blob=new Blob([lines.join('\n')],{type:'text/csv;charset=utf-8;'});
  const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='export_filtre.csv';document.body.appendChild(a);a.click();URL.revokeObjectURL(url);a.remove();
}

function attach(){
  ['q','f-media','f-authors','f-theme','f-proact','f-ia','f-date-de','f-date-a'].forEach(id=>{const el=document.getElementById(id); el.addEventListener('input',render); el.addEventListener('change',render);});
  document.getElementById('btn-reset').addEventListener('click', resetFilters);
  document.getElementById('btn-export').addEventListener('click', exportCSV);
}

document.addEventListener('DOMContentLoaded',()=>{buildFilters(); attach(); render();});
</script>
</body>
</html>
