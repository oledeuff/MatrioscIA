<!doctype html>
<html lang="fr" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MatrioscIA — Matrice· 4 profils · OSINT×IA</title>
<meta name="description" content="Typologie : 4 profils d’usagers et matrice OSINT×IA simplifiée (exploratoire, avancé, expert). Descriptions complètes, tableur de synthèse et mode sombre/clair.">
<style>
/* THEME */
:root{
  --bg:#0c0f1a; --panel:#0f1526; --ink:#e6e9f3; --muted:#9aa6b2; --bord:#1e2742;
  --ink-strong:#f8fafc; --accent:#93c5fd; --table-head:#0b122c; --shadow:0 14px 42px rgba(0,0,0,.45);

  /* Filtres (sombre) */
  --control-bg:#141c33; --control-bord:#2a3860; --control-ink:#e9edf8; --control-ph:#b4bed0; --control-focus:#7aa2ff;

  /* Couleurs profils */
  --c-prag:#22d3ee; --c-arti:#fbbf24; --c-enq:#60a5fa; --c-arch:#a78bfa;
  --grad-prag:linear-gradient(135deg,#0ea5e955,#22d3ee33);
  --grad-arti:linear-gradient(135deg,#f59e0b55,#fbbf2433);
  --grad-enq:linear-gradient(135deg,#3b82f655,#60a5fa33);
  --grad-arch:linear-gradient(135deg,#8b5cf655,#a78bfa33);

  /* Niveaux OSINT (teal/blue/purple) */
  --osint-exp:#14b8a6;   /* exploratoire */
  --osint-adv:#3b82f6;   /* avancé */
  --osint-exp2:#7c3aed;  /* expert */
  /* Niveaux IA (lime/amber/rose) */
  --ia-exp:#84cc16;      /* exploratoire */
  --ia-adv:#f59e0b;      /* avancée */
  --ia-exp2:#f43f5e;     /* experte */
}
html[data-theme="light"]{
  --bg:#f6f8fc; --panel:#ffffff; --ink:#0b1220; --muted:#4b5563; --bord:#e3e8f4;
  --ink-strong:#0b122c; --accent:#3b82f6; --table-head:#eff3fb; --shadow:0 12px 28px rgba(2,6,23,.12);

  --control-bg:#ffffff; --control-bord:#d7deee; --control-ink:#0b1220; --control-ph:#6b7280; --control-focus:#3b82f6;

  --c-prag:#06b6d4; --c-arti:#f59e0b; --c-enq:#3b82f6; --c-arch:#8b5cf6;
  --grad-prag:linear-gradient(135deg,#06b6d43a,#22d3ee22);
  --grad-arti:linear-gradient(135deg,#f59e0b3a,#fbbf2422);
  --grad-enq:linear-gradient(135deg,#3b82f63a,#60a5fa22);
  --grad-arch:linear-gradient(135deg,#8b5cf63a,#a78bfa22);
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--ink)}

/* HEADER */
.header{padding:18px 16px;border-bottom:1px solid var(--bord);background:linear-gradient(180deg,rgba(148,163,184,.08),transparent)}
.header .wrap{max-width:1160px;margin:0 auto;display:flex;gap:16px;align-items:center;justify-content:space-between}
.title{display:flex;align-items:center;gap:12px}
.title h1{margin:0;font-size:22px;color:var(--ink-strong);letter-spacing:.2px}
.controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center}

/* Filtres */
.controls input,.controls select,.btn{
  padding:10px 12px;border-radius:12px;border:1px solid var(--control-bord);
  background:var(--control-bg);color:var(--control-ink);
  box-shadow:0 0 0 0 transparent; outline:none; transition:box-shadow .15s ease, border-color .15s ease, background .15s ease;
}
.controls input::placeholder{color:var(--control-ph)}
.controls select option{color:var(--ink); background:var(--panel);}
.controls input:focus,.controls select:focus{box-shadow:0 0 0 3px color-mix(in srgb, var(--control-focus) 30%, transparent);border-color:var(--control-focus)}
.controls a.btn{text-decoration:none}
.btn{cursor:pointer}
#resetBtn{font-weight:600;border-color:var(--control-bord)}
#resetBtn:hover{border-color:var(--control-focus)}

/* WRAP */
.wrap{max-width:1160px;margin:0 auto;padding:18px 16px}

/* GRID 2 COLS */
.grid{display:grid;gap:16px;grid-template-columns:repeat(2,minmax(320px,1fr))}
@media (max-width:780px){ .grid{grid-template-columns:1fr} }

/* CARD */
.card{
  position:relative;overflow:hidden;border:1px solid var(--bord);border-radius:16px;
  background:
    radial-gradient(1200px 400px at -10% -10%, rgba(255,255,255,.06) 0%, transparent 60%),
    radial-gradient(900px 300px at 110% -20%, rgba(255,255,255,.05) 0%, transparent 60%),
    var(--panel);
  box-shadow:var(--shadow);
  transition:transform .25s ease, box-shadow .25s ease, border-color .25s ease;
}
.card:hover{transform:translateY(-2px);border-color:color-mix(in srgb, var(--accent) 30%, var(--bord));box-shadow:0 18px 50px rgba(0,0,0,.55)}
.ribbon{height:70px;background:var(--grad);}
.card-head{display:flex;align-items:flex-end;gap:10px;padding:0 16px;margin-top:-48px}

/* >>> Catégorie (plus lisible) */
.pill{
  display:inline-flex;gap:10px;align-items:center;
  background:rgba(255,255,255,.08);
  border:1px solid var(--bord);
  padding:8px 12px;
  border-radius:999px;
  font-size:15px;          /* + lisible */
  font-weight:700;         /* + fort */
  letter-spacing:.2px;
  color:var(--ink-strong);
}
.dot{width:10px;height:10px;border-radius:999px;display:inline-block}

/* TITRES DANS LES CARTES */
.card h3{display:none}     /* on masque l'ancien H3 */
.card section{padding:0 16px 14px}
.card section h4{
  margin:12px 0 6px;
  font-size:14px;          /* même niveau pour tous (Orientation/IA/Hyperdoc) */
  color:var(--ink-strong);
  letter-spacing:.15px;
}
.card section p{margin:0 0 8px;line-height:1.6}
.sep{height:1px;background:var(--bord);margin:6px 16px}

/* META + BADGES NIVEAUX */
.meta{
  margin:6px 16px 12px;
  display:flex;gap:8px;flex-wrap:wrap;align-items:center;
  color:var(--muted);font-size:13px
}
.level{
  display:inline-flex;align-items:center;gap:8px;
  padding:4px 10px;border-radius:999px;border:1px solid transparent;
  font-size:12.5px;font-weight:600; letter-spacing:.15px;
  background:rgba(255,255,255,.04);
}
.level .dot{width:8px;height:8px}

/* Codes couleur OSINT */
.level.osint.exploratoire{ border-color: color-mix(in srgb, var(--osint-exp) 55%, transparent); }
.level.osint.exploratoire .dot{ background: var(--osint-exp); }
.level.osint.avancee{      border-color: color-mix(in srgb, var(--osint-adv) 55%, transparent); }
.level.osint.avancee .dot{ background: var(--osint-adv); }
.level.osint.experte{      border-color: color-mix(in srgb, var(--osint-exp2) 55%, transparent); }
.level.osint.experte .dot{ background: var(--osint-exp2); }

/* Codes couleur IA */
.level.ia.exploratoire{    border-color: color-mix(in srgb, var(--ia-exp) 55%, transparent); }
.level.ia.exploratoire .dot{ background: var(--ia-exp); }
.level.ia.avancee{         border-color: color-mix(in srgb, var(--ia-adv) 55%, transparent); }
.level.ia.avancee .dot{    background: var(--ia-adv); }
.level.ia.experte{         border-color: color-mix(in srgb, var(--ia-exp2) 55%, transparent); }
.level.ia.experte .dot{    background: var(--ia-exp2); }

/* TABLE + MATRIX */
.table-wrap, .matrix-wrap{overflow:auto;border:1px solid var(--bord);border-radius:14px;background:var(--panel);box-shadow:var(--shadow);margin-top:10px}
table{border-collapse:separate;border-spacing:0;width:100%}
th,td{border:1px solid var(--bord);padding:10px;vertical-align:top;line-height:1.45}
thead th{background:var(--table-head)}
.fam{white-space:nowrap}
.note{color:var(--muted);font-size:.95em;margin-top:8px}
.dim{opacity:.35}

/* FOOTER & LINKS */
.footer{color:var(--muted);border-top:1px solid var(--bord);margin-top:20px;padding-top:10px;font-size:12.5px}
.links{display:flex;gap:10px;flex-wrap:wrap;margin:6px 0 0}
.links a{padding:6px 10px;border:1px solid var(--bord);border-radius:10px;background:rgba(255,255,255,.03);text-decoration:none;color:var(--ink)}
</style>
</head>
<body>
<header class="header">
  <div class="wrap">
    <div class="title">
      <h1>Typologie MatrioscIA</h1>
    </div>
    <div class="controls">
      <input id="q" placeholder="Rechercher (famille, notions, besoins…)" />
      <select id="osint">
        <option value="">OSINT — Tous</option>
        <option>Osint exploratoire</option>
        <option>Osint avancé</option>
        <option>Osint expert</option>
      </select>
      <select id="ia">
        <option value="">IA — Tous</option>
        <option>IA exploratoire</option>
        <option>IA avancée</option>
        <option>IA experte</option>
      </select>
      <button id="resetBtn" class="btn" title="Réinitialiser les filtres">Réinitialiser</button>
      <label class="btn" style="display:inline-flex;align-items:center;gap:8px">
        <input id="theme" type="checkbox"> Thème clair
      </label>
      <a class="btn" href="https://oledeuff.github.io/MatrioscIA" target="_blank" rel="noopener">↗ Site MatrioscIA (base)</a>
    </div>
  </div>
</header>

<main class="wrap">
  <!-- FICHES (2 par ligne) -->
  <section class="grid" id="cards">
    <!-- Pragmatistes critiques -->
    <article class="card" data-famille="Pragmatistes critiques" data-osint="Osint exploratoire" data-ia="IA exploratoire" style="--grad:var(--grad-prag)">
      <div class="ribbon"></div>
      <div class="card-head">
        <span class="pill"><span class="dot" style="background:var(--c-prag)"></span>Pragmatistes critiques</span>
      </div>
      <div class="meta">
        <span class="level osint exploratoire"><span class="dot"></span>OSINT exploratoire</span>
        <span class="level ia exploratoire"><span class="dot"></span>IA exploratoire</span>
      </div>
      <section>
        <h4>Orientation générale</h4>
        <p>Ce premier profil rassemble des acteurs dont la priorité est de rendre intelligibles, pour le public comme pour les pairs, les opérations de vérification effectuées sous contrainte de temps. Leur pratique s’appuie sur une panoplie Osint circonscrite : collecte raisonnée de traces ouvertes, vérification iconographique selon des protocoles standards, recoupements spatio-temporels élémentaires et contrôle de cohérence entre sources. Cette économie de moyens n’est pas un déficit de méthode ; elle correspond à un choix assumé de maintenir des procédures simples, traçables et explicables, compatibles avec le rythme de l’actualité et les exigences éditoriales de transparence.</p>
      </section>
      <div class="sep"></div>
      <section>
        <h4>Usage de l’IA</h4>
        <p>Dans cette configuration, l’IA ne devrait être mobilisée qu’à la marge et à titre expérimental, avec traductions rapides, transcriptions courtes et résumés ciblés, et toujours selon un principe de réversibilité. Toute sortie machine est relue, comparée à une référence manuelle et consignée avec les paramètres pertinents. Le positionnement critique consiste à considérer que l’IA ne peut pas tout et qu’il est nécessaire de préserver le cadre des missions professionnelles et d’éviter toute substitution.</p>
      </section>
      <div class="sep"></div>
      <section>
        <h4>Pratiques hyperdocumentaires</h4>
        <p>Sur le plan des pratiques hyperdocumentaires, l’accent porte sur un kit minimal, mais précis : journal de vérification, captures horodatées, références croisées, brèves notices expliquant les choix. L’objectif est d’adosser chaque geste à une trace exploitable sans alourdir le flux de production.</p>
      </section>
    </article>

    <!-- Artisans du récit -->
    <article class="card" data-famille="Artisans du récit" data-osint="Osint avancé" data-ia="IA exploratoire" style="--grad:var(--grad-arti)">
      <div class="ribbon"></div>
      <div class="card-head">
        <span class="pill"><span class="dot" style="background:var(--c-arti)"></span>Artisans du récit</span>
      </div>
      <div class="meta">
        <span class="level osint avancee"><span class="dot"></span>OSINT avancé</span>
        <span class="level ia exploratoire"><span class="dot"></span>IA exploratoire</span>
      </div>
      <section>
        <h4>Orientation générale</h4>
        <p>Ce profil renvoie aux cellules visuelles des rédactions et aux équipes en charge des formats longs, pour lesquelles l’objectif premier est d’éclairer le public sans affaiblir la charge de preuve. L’Osint y est appréhendé comme matériau d’élucidation : établir des provenances d’images et de séquences, reconstituer des frises chronologiques, cartographier des acteurs ou des lieux, puis insérer ces éléments dans une narration lisible. La démarche repose sur une explicitation systématique des limites probatoires, afin d’éviter que la forme ne prenne le pas sur l’établissement des faits.</p>
      </section>
      <div class="sep"></div>
      <section>
        <h4>Usage de l’IA</h4>
        <p>L’IA intervient ponctuellement, sous cadrage éditorial, pour tester une hypothèse, combler un manque ou produire des visualisations explicatives, avec un étiquetage qui distingue clairement illustration et preuve.</p>
      </section>
      <div class="sep"></div>
      <section>
        <h4>Pratiques hyperdocumentaires</h4>
        <p>Les pratiques hyperdocumentaires prennent ici la forme d’un dossier public de preuve accolé au récit : coulisses de méthode, liens vers traces ouvertes, métadonnées essentielles, et encadrés explicatifs. Ce couplage récit-preuves permet au lecteur d’identifier la source de chaque élément et le degré d’incertitude associé.</p>
      </section>
    </article>

    <!-- Enquêteurs augmentés -->
    <article class="card" data-famille="Enquêteurs augmentés" data-osint="Osint expert" data-ia="IA avancée" style="--grad:var(--grad-enq)">
      <div class="ribbon"></div>
      <div class="card-head">
        <span class="pill"><span class="dot" style="background:var(--c-enq)"></span>Enquêteurs augmentés</span>
      </div>
      <div class="meta">
        <span class="level osint experte"><span class="dot"></span>OSINT expert</span>
        <span class="level ia avancee"><span class="dot"></span>IA avancée</span>
      </div>
      <section>
        <h4>Orientation générale</h4>
        <p>Ce profil correspond aux journalistes d’investigation ou analystes confirmés dont la pratique repose sur une panoplie Osint étendue et maîtrisée. Le cœur de leur activité consiste à articuler, dans un cadre probatoire exigeant, des techniques de géolocalisation et de chronolocalisation, l’exploitation d’imageries multi-sources, l’exploration de registres hétérogènes ainsi que la construction et l’analyse de graphes relationnels.</p>
      </section>
      <div class="sep"></div>
      <section>
        <h4>Usage de l’IA</h4>
        <p>Dans ce dispositif, l’IA ne remplace pas l’enquête ; elle accroît les moyens d’investigation en apportant transcription longue, traduction multilingue, similarité et priorisation sur de grands volumes, ou encore résumés guidés pour cartographier rapidement un corpus. L’objectif est de réallouer le temps vers l’analyse à plus forte valeur probatoire.</p>
      </section>
      <div class="sep"></div>
      <section>
        <h4>Pratiques hyperdocumentaires</h4>
        <p>Sous l’angle des pratiques hyperdocumentaires, le travail s’inscrit dans un dossier opératoire complet : description des chaînes de traitement, paramètres et versions conservés au fil des itérations, possibilité de rejouer les étapes, mise au propre des graphes relationnels, et rapprochement systématique entre résultats assistés et méthode de référence. Ce dispositif soutient la reproductibilité sans rompre le rythme de l’enquête.</p>
      </section>
    </article>

    <!-- Architectes de la preuve -->
    <article class="card" data-famille="Architectes de la preuve" data-osint="Osint expert" data-ia="IA experte" style="--grad:var(--grad-arch)">
      <div class="ribbon"></div>
      <div class="card-head">
        <span class="pill"><span class="dot" style="background:var(--c-arch)"></span>Architectes de la preuve</span>
      </div>
      <div class="meta">
        <span class="level osint experte"><span class="dot"></span>OSINT expert</span>
        <span class="level ia experte"><span class="dot"></span>IA experte</span>
      </div>
      <section>
        <h4>Orientation générale</h4>
        <p>Dans cette famille, l’enquête devient un espace d’expérimentation technique à part entière. Les acteurs conçoivent et ajustent des pipelines Osint et IA, instrumentent la collecte et l’enrichissement, posent des métriques et des seuils et documentent versions et journaux. Ils demandent un cadre de travail plus ouvert, des moyens financiers stables et une collaboration étroite entre ingénierie et investigation, afin d’aligner l’outillage sur les exigences probatoires.</p>
        <p>Deux orientations se distinguent : l’ingénierie ouverte, fondée sur des briques modulaires testées et documentées au sein de communautés qui partagent méthodes et valeurs, et la logique produit, qui privilégie des plateformes intégrées conçues pour l’échelle, au prix d’une auditabilité parfois réduite.</p>
      </section>
      <div class="sep"></div>
      <section>
        <h4>Pratiques hyperdocumentaires</h4>
        <p>Les pratiques hyperdocumentaires sont ici d’ordre infrastructurel et de gouvernance : schémas et standards de données, API documentées, jeux d’essai et batteries de tests, politiques d’accès et de conservation, logs exploitables pour l’audit. Elles permettent d’industrialiser la fabrication de preuves traçables, que l’on retienne une approche ouverte ou une plateforme intégrée, et favorisent des combinaisons hybrides où les briques critiques pour la preuve restent contrôlables et rejouables.</p>
        <p>Il s’agit bien souvent de participer à une communauté de l’Osint qui partage non seulement des codes et des méthodes, mais également des valeurs, ce qui est beaucoup moins le cas chez ceux qui cherchent à vendre à tout prix leur solution.</p>
      </section>
      <div class="sep"></div>
      <section>
        <h4>Dynamiques</h4>
        <p>Ces quatre profils ne sont pas figés : ils traduisent des dynamiques d’hybridation entre critique, expérimentation et ingénierie. La matrice MatrioscIA rend visibles ces tensions et complémentarités entre approches techniques, réflexives et créatives.</p>
      </section>
    </article>
  </section>

  <!-- TABLEUR DE SYNTHÈSE -->
  <section style="margin-top:16px">
    <h2>Tableur — Synthèse des familles</h2>
    <div class="table-wrap">
      <table id="tabCats">
        <thead>
          <tr>
            <th>Famille</th>
            <th>Niveau OSINT</th>
            <th>Niveau IA</th>
            <th>Description courte</th>
            <th>Usages typiques</th>
            <th>Besoins clés</th>
            <th>Positionnement IA</th>
          </tr>
        </thead>
        <tbody>
          <tr data-famille="Pragmatistes critiques" data-osint="Osint exploratoire" data-ia="IA exploratoire">
            <td class="fam"><span class="dot" style="background:var(--c-prag)"></span>Pragmatistes critiques</td>
            <td><span class="level osint exploratoire"><span class="dot"></span>OSINT exploratoire</span></td>
            <td><span class="level ia exploratoire"><span class="dot"></span>IA exploratoire</span></td>
            <td>Procédures simples, traçables et explicables.</td>
            <td>Collecte raisonnée ; vérification iconographique ; recoupements de base.</td>
            <td>Journal de vérif., captures horodatées, références croisées.</td>
            <td>IA d’appoint (traductions, transcriptions, résumés) — réversibilité.</td>
          </tr>
          <tr data-famille="Artisans du récit" data-osint="Osint avancé" data-ia="IA exploratoire">
            <td class="fam"><span class="dot" style="background:var(--c-arti)"></span>Artisans du récit</td>
            <td><span class="level osint avancee"><span class="dot"></span>OSINT avancé</span></td>
            <td><span class="level ia exploratoire"><span class="dot"></span>IA exploratoire</span></td>
            <td>Récit sans sacrifier la charge de preuve.</td>
            <td>Provenances ; frises chrono ; cartographies ; visualisations explicatives.</td>
            <td>Dossier public de preuve ; métadonnées essentielles.</td>
            <td>IA ponctuelle et étiquetée (illustration ≠ preuve).</td>
          </tr>
          <tr data-famille="Enquêteurs augmentés" data-osint="Osint expert" data-ia="IA avancée">
            <td class="fam"><span class="dot" style="background:var(--c-enq)"></span>Enquêteurs augmentés</td>
            <td><span class="level osint experte"><span class="dot"></span>OSINT expert</span></td>
            <td><span class="level ia avancee"><span class="dot"></span>IA avancée</span></td>
            <td>Panoplie étendue, exigences probatoires élevées.</td>
            <td>Similarité/priorisation ; résumés guidés ; exploration de corpus.</td>
            <td>Dossier opératoire complet et rejouable.</td>
            <td>IA pour augmenter, pas remplacer l’enquête.</td>
          </tr>
          <tr data-famille="Architectes de la preuve" data-osint="Osint expert" data-ia="IA experte">
            <td class="fam"><span class="dot" style="background:var(--c-arch)"></span>Architectes de la preuve</td>
            <td><span class="level osint experte"><span class="dot"></span>OSINT expert</span></td>
            <td><span class="level ia experte"><span class="dot"></span>IA experte</span></td>
            <td>Pipelines, instrumentation, métriques, logs.</td>
            <td>Briques modulaires / plateformes ; standards ; API ; tests.</td>
            <td>Gouvernance ; auditabilité ; politiques d’accès/conservation.</td>
            <td>Preuves traçables & rejouables à l’échelle.</td>
          </tr>
        </tbody>
      </table>
    </div>
    <p class="note">La recherche et les filtres en tête de page s’appliquent aussi au tableau.</p>
  </section>

  <!-- MATRICE 3×3 -->
  <section style="margin-top:16px">
    <h2>Matrice 3×3 — OSINT × IA</h2>
    <div class="matrix-wrap">
      <table class="matrix">
        <thead>
          <tr>
            <th></th>
            <th>OSINT exploratoire</th>
            <th>OSINT avancé</th>
            <th>OSINT expert</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th>IA exploratoire</th>
            <td data-famille="Pragmatistes critiques"><span class="dot" style="background:var(--c-prag)"></span>Pragmatistes critiques</td>
            <td data-famille="Artisans du récit"><span class="dot" style="background:var(--c-arti)"></span>Artisans du récit</td>
            <td data-famille="—">—</td>
          </tr>
          <tr>
            <th>IA avancée</th>
            <td data-famille="—">—</td>
            <td data-famille="—">—</td>
            <td data-famille="Enquêteurs augmentés"><span class="dot" style="background:var(--c-enq)"></span>Enquêteurs augmentés</td>
          </tr>
          <tr>
            <th>IA experte</th>
            <td data-famille="—">—</td>
            <td data-famille="—">—</td>
            <td data-famille="Architectes de la preuve"><span class="dot" style="background:var(--c-arch)"></span>Architectes de la preuve</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="links" style="margin-top:10px">
      <a href="https://oledeuff.github.io/MatrioscIA" target="_blank" rel="noopener">↗ Site MatrioscIA (base)</a>
    </div>
    <p class="note">Les cellules non concernées par les filtres peuvent s’estomper.</p>
  </section>

  <div class="footer">
    <strong>Projet MatrioscIA – IHEMI – 2024–2025.</strong><br>
    Olivier Le Deuff, Rayya Roumanos, Thaís Barbosa de Almeida. — <em>CC BY</em>
  </div>
</main>

<script>
/* Thème sombre/clair */
const root=document.documentElement;
const chk=document.getElementById('theme');
const saved=localStorage.getItem('matrioscia-theme');
if(saved){ root.setAttribute('data-theme', saved); chk.checked=(saved==='light'); }
chk.addEventListener('change',()=>{ const mode=chk.checked?'light':'dark'; root.setAttribute('data-theme',mode); localStorage.setItem('matrioscia-theme',mode); });

/* Filtres + Réinitialiser */
const $=s=>document.querySelector(s), $$=s=>Array.from(document.querySelectorAll(s));
const q=$('#q'), os=$('#osint'), ia=$('#ia'), reset=$('#resetBtn');

function norm(s){ return (s||'').toLowerCase(); }
function selOK(val,sel){ return (!sel||!sel.length)||norm(val)===norm(sel); }
function matchText(el,query){ return !query || norm(el.textContent).includes(norm(query)); }

function applyFilters(){
  const qv=q.value.trim(), osv=os.value, iav=ia.value;
  const visible=new Set();

  // Fiches
  $$('#cards .card').forEach(card=>{
    const ok=selOK(card.dataset.osint,osv)&&selOK(card.dataset.ia,iav)&&matchText(card,qv);
    card.style.display=ok?'':'none';
    if(ok) visible.add(card.dataset.famille);
  });

  // Tableau
  $$('#tabCats tbody tr').forEach(tr=>{
    const ok=selOK(tr.dataset.osint,osv)&&selOK(tr.dataset.ia,iav)&&matchText(tr,qv);
    tr.style.display=ok?'':'none';
    if(ok) visible.add(tr.dataset.famille);
  });

  // Matrice
  $$('.matrix [data-famille]').forEach(td=>{
    const fam=td.getAttribute('data-famille');
    if(fam && fam!=='—' && !visible.has(fam)) td.classList.add('dim'); else td.classList.remove('dim');
  });
}
[q,os,ia].forEach(el=>{el.addEventListener('input',applyFilters); el.addEventListener('change',applyFilters);});
reset.addEventListener('click',()=>{ q.value=''; os.value=''; ia.value=''; applyFilters(); });
applyFilters();
</script>
</body>
</html>
